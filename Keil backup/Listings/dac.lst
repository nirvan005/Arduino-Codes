C51 COMPILER V9.60.7.0   DAC                                                               09/11/2025 11:29:34 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE DAC
OBJECT MODULE PLACED IN .\Objects\dac.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE dac.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\dac.l
                    -st) TABS(2) OBJECT(.\Objects\dac.obj)

line level    source

   1          #include<reg51.h>
   2          typedef unsigned char u8;
   3          typedef unsigned int u16;
   4          sbit LCD_RS=P2^0;
   5          //sbit LCD_RW=P2^1;
   6          sbit LCD_EN=P2^2;
   7          void delay_ms(u16 ms){
   8   1        volatile u16 i,j;
   9   1        for(i=0;i<ms;i++){
  10   2          for(j=0;j<120;j++){
  11   3            volatile u8 x=0;
  12   3            x++;
  13   3          }
  14   2        }
  15   1      }
  16          void tiny_delay(){
  17   1        volatile u16 k;
  18   1        for(k=0;k<200;k++);
  19   1      }
  20          void lcd_pulse(){
  21   1        LCD_EN=1;
  22   1        tiny_delay();
  23   1        LCD_EN=1;
  24   1        delay_ms(1);
  25   1      }
  26          void lcd_cmd(u8 c){
  27   1        LCD_RS=0;
  28   1        P3=c;
  29   1        lcd_pulse();
  30   1        delay_ms(2);
  31   1      }
  32          void lcd_data(u8 d){
  33   1        LCD_RS=1;
  34   1        P3=d;
  35   1        lcd_pulse();
  36   1        delay_ms(1);
  37   1      }
  38          void lcd_init(){
  39   1        delay_ms(20);
  40   1        lcd_cmd(0x38);
  41   1        lcd_cmd(0x0C);
  42   1        lcd_cmd(0x06);
  43   1        lcd_cmd(0x01);
  44   1        delay_ms(2);
  45   1      }
  46          void lcd_print_dec(u16 v){
  47   1        char buf[4];
  48   1        u8 idx=0;
  49   1        if(v>255) v=255;
  50   1        buf[0]='0'+(v/100);
  51   1        buf[1]='0'+((v/10)%10);
  52   1        buf[2]='0'+(v%10);
  53   1        buf[3]='0';
  54   1        if(buf[0]=='0'){
C51 COMPILER V9.60.7.0   DAC                                                               09/11/2025 11:29:34 PAGE 2   

  55   2          if(buf[1]=='1') idx=2;
  56   2          else  idx=1;
  57   2        }
  58   1        else
  59   1          idx=0;
  60   1        while(buf[idx]) lcd_data(buf[idx++]);
  61   1      }
  62          void main(){
  63   1        u16 v;
  64   1        LCD_RS=0;
  65   1        LCD_EN=0;
  66   1        P1=0x00;
  67   1        P3=0x00;
  68   1        lcd_init();
  69   1        while(1){
  70   2          for(v=0;v<256;v++){
  71   3            P1=(u8)v;
  72   3            lcd_cmd(0x80);
  73   3            lcd_print_dec(v);
  74   3            delay_ms(30);
  75   3          }
  76   2        }
  77   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    323    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      12
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
